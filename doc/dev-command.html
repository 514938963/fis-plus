<blockquote>
<p>介绍 fis-plus 开发命令，完成你的所有开发需求</p>
</blockquote>
<p>执行 <strong>fisp --help</strong> 让我们来看一下 fis 命令的相关帮助：</p>
<pre><code><span class="hljs-attribute">Usage</span>: <span class="hljs-string">fis-plus &lt;command&gt;</span>

<span class="sql">Commands:

  <span class="hljs-operator"><span class="hljs-keyword">release</span>     build <span class="hljs-keyword">and</span> deploy your project
  <span class="hljs-keyword">install</span>     <span class="hljs-keyword">install</span> components <span class="hljs-keyword">and</span> demos, <span class="hljs-keyword">create</span> <span class="hljs-string">`widget`</span> <span class="hljs-keyword">and</span> <span class="hljs-string">`module`</span>
  <span class="hljs-keyword">server</span>      launch a php-cgi <span class="hljs-keyword">server</span>

Options:

  -h, <span class="hljs-comment">--help     output usage information</span>
  -v, <span class="hljs-comment">--version  output the version number</span>
  <span class="hljs-comment">--no-color     disable colored output</span></span></span>
</code></pre><ul>
<li><strong>fisp release</strong>： 编译并发布你的项目</li>
<li><strong>fisp server</strong>：启动一个 <strong>1.8M</strong> 大小的内置调试服务器，它采用php-java-bridge技术实现， <em>依赖java、php-cgi外部环境</em> ，可以 <strong>完美支持运行php程序</strong> 哦。</li>
</ul>
<h3 class="" id="fis release"><a name="fis%20release" href="#fis%20release">fis release</a></h3><p>release 是一个非常强大的命令。</p>
<ul>
<li>它的主要任务就是进行代码的 <strong>编译</strong> 与 <strong>部署</strong></li>
<li>它的参数囊括了前端开发所需的各种基础功能。通过添加不同参数，组合使用。</li>
</ul>
<p>可以在命令行下执行
执行 <strong>fisp release -h</strong> 让我们来看一下 fis 命令的相关帮助：</p>
<pre><code class="hljs lang-bash"><span class="hljs-attribute">Usage</span>: <span class="hljs-string">release [options]</span>

<span class="haml">  Options:

    -<span class="ruby">h, --help             output usage information
</span>    -<span class="ruby">d, --dest &lt;names&gt;     release output destination
</span>    -<span class="ruby">m, --md5 [level]      md5 release option
</span>    -<span class="ruby"><span class="hljs-constant">D</span>, --domains          add domain name
</span>    -<span class="ruby">l, --lint             with lint
</span>    -<span class="ruby">t, --test             with unit testing
</span>    -<span class="ruby">o, --optimize         with optimizing
</span>    -<span class="ruby">p, --pack             with package
</span>    -<span class="ruby">w, --watch            monitor the changes of project
</span>    -<span class="ruby"><span class="hljs-constant">L</span>, --live             automatically reload your browser
</span>    -<span class="ruby">c, --clean            clean compile cache
</span>    -<span class="ruby">r, --root &lt;path&gt;      set project root
</span>    -<span class="ruby">f, --file &lt;filename&gt;  set fis-conf file
</span>    -<span class="ruby">u, --unique           use unique compile caching
</span>    -<span class="ruby">-verbose              enable verbose output</span></span>
</code></pre>
<ul>
<li><code>--domain</code> 或 <code>-D</code> 参数，对静态资源添加domian。<a href="#domain%E9%85%8D%E7%BD%AE">domain 配置</a></li>
<li><code>--watch</code> 或 <code>-w</code> 参数，对项目进行增量编译，监听文件变化再触发编译</li>
<li><code>--md5 [level]</code> 或 <code>-m [level]</code> 参数，在编译的时候可以对文件自动加md5戳，从此告别在静态资源url后面写?version=xxx的时代</li>
<li><code>--lint</code> 或 <code>-l</code> 参数，支持在编译的时候根据项目配置自动代码检查</li>
<li><code>--test</code> 或 <code>-t</code> 参数，支持在编译的时候对代码进行自动化测试</li>
<li><code>--pack</code> 或 <code>-p</code> 参数，对产出文件根据项目配置进行打包</li>
<li><code>--optimize</code> 或 <code>-o</code> 参数，对js、css、html进行压缩</li>
<li><p><code>--dest [path|name]</code> 或 <code>-d</code> 参数，来指定编译后的代码部署路径，支持发布到 <strong>本地目录、本地调试服务器目录、远程机器目录 (需要配置)</strong>，它与 --watch 参数配合使用，可以让你的代码保存就上传！而且 --dest 值支持逗号分隔，这也就意味着，你 <strong> 一次编译可以同时发布到本地以及多台远程机器上</strong>！举几个栗子:</p>
<ul>
<li><p>发布到 fisp server open 目录下用于本地调试</p>
<pre><code class="hljs lang-bash">  fisp <span class="hljs-operator"><span class="hljs-keyword">release</span>
  # <span class="hljs-keyword">or</span>
  fisp <span class="hljs-keyword">release</span> <span class="hljs-comment">--dest preview</span></span>
</code></pre>
</li>
<li><p>发布到项目根目录的 output 目录下， <em> 注意，这里的 output 其实是一个内置的部署配置名，而不是一个目录名 </em>。</p>
<pre><code class="hljs lang-bash">  fisp <span class="hljs-operator"><span class="hljs-keyword">release</span> -d <span class="hljs-keyword">output</span></span>
</code></pre>
</li>
<li><p>发布到相对 <code> 工作目录 </code> 的路径</p>
<pre><code class="hljs lang-bash">  fisp <span class="hljs-operator"><span class="hljs-keyword">release</span> -d ../<span class="hljs-keyword">output</span></span>
</code></pre>
</li>
<li><p>发布到绝对路径</p>
<pre><code class="hljs lang-bash">  fisp <span class="hljs-operator"><span class="hljs-keyword">release</span> -d /home/<span class="hljs-keyword">work</span>/ouput
  # win
  fisp <span class="hljs-keyword">release</span> -d d:/<span class="hljs-keyword">work</span>/<span class="hljs-keyword">output</span></span>
</code></pre>
</li>
<li><p>使用配置文件的 <a href="dev-deploy">deploy 节点配置 </a> 进行发布，此配置可将代码上传至远端</p>
<pre><code class="hljs lang-bash">  fisp release <span class="hljs-operator">-d</span> remote
</code></pre>
</li>
<li><p>以上所有发布规则任意组合使用（一次编译同时上传到多台远端机器 &amp; 项目根目录下的 output &amp; 调试服务器根目录 &amp; 本地绝对路径）</p>
<pre><code class="hljs lang-bash">  fisp releaes -d remote,qa,rd,output,preview,<span class="hljs-constant">D</span><span class="hljs-symbol">:/work/output</span>
</code></pre>
</li>
</ul>
</li>
<li><p><code>--live</code> 或 <code>-L</code> 参数，支持编译后自动刷新浏览器。fis 需要使用 <a href="http://feedback.livereload.com/knowledgebase/articles/86242-how-do-i-install-and-use-the-browser-extensions-">LiveReload 浏览器扩展 </a> 来连接 fis 的 livereload 服务器：</p>
<ul>
<li><a href="http://download.livereload.com/2.0.9/LiveReload-2.0.9.safariextz">Safari</a></li>
<li><a href="https://chrome.google.com/webstore/detail/livereload/jnihajbhpnppcggbcgedagnkighmdlei">Chrome</a></li>
<li><a href="http://download.livereload.com/2.0.8/LiveReload-2.0.8.xpi">Firefox</a></li>
<li><p><a href="https://github.com/dvdotsenko/livereload_ie_extension/downloads">IE</a> - 真应该滚粗地球</p>
<p>安装好浏览器插件后，在 common 模块基础模板中添加一段注释代码：</p>
<pre><code>  <span class="hljs-comment">&lt;!--添加livereload注释--&gt;</span>
  <span class="hljs-comment">&lt;!--livereload--&gt;</span>
</code></pre><p>然后在相应需要开启 livereload 的模块 (只能同时开启一个) 编译时添加 -L 或 --live 参数，在浏览器里点击插件按钮进行连接，就完成了设置可以享受了~</p>
</li>
</ul>
</li>
<li><p><code>--unique</code> 或 <code>-u</code> 参数，每次编译创建一个独立的缓存目录，<strong> 解决同一台机器多人编译互相影响的问题 </strong>。如果在自己机器一人编译，那就不需要了。</p>
</li>
<li><code>--verbose</code> 参数，编译时输出log信息</li>
<li><code>--lint</code> 或 <code>-l</code> 参数，对项目进行lint检查</li>
<li><code>--test</code> 或 <code>-t</code> 参数，对项目执行自动化测试。目前仅保留接口，没有测试功能</li>
<li><code>--clean</code> 或 <code>-w</code> 参数，对项目进行清缓存编译。</li>
<li><code>--root</code> 或 <code>-r</code> 参数，设置项目根路径</li>
<li><code>--file</code> 或 <code>-f</code> 参数，编译时指定fis-conf配置文件路径</li>
</ul>
<h3 class="" id="fis server"><a name="fis%20server" href="#fis%20server">fis server</a></h3><p>提供本地调试的轻量级服务器，完全模拟线上运行，用户可通过配置测试数据、请求模拟等，进行线下无后端环境开发。</p>
<p>fis 的调试服务器依赖于用户本地的 <strong>jre</strong> 和 <strong>php-cgi</strong> 环境</p>
<ul>
<li><a href="#%E5%AE%89%E8%A3%85">环境安装请移步这里</a></li>
</ul>
<p>搞定环境后，让我们来启动调试服务器看看：</p>
<pre><code>$ fisp server <span class="hljs-operator"><span class="hljs-keyword">start</span>
checking java support : <span class="hljs-keyword">version</span> <span class="hljs-number">1.6</span><span class="hljs-number">.0</span>
checking php-cgi support : <span class="hljs-keyword">version</span> <span class="hljs-number">5.2</span><span class="hljs-number">.11</span>
<span class="hljs-keyword">starting</span> fis-<span class="hljs-keyword">server</span> <span class="hljs-keyword">on</span> port : <span class="hljs-number">8080</span></span>
</code></pre><p>服务器启动之后，它会自动检查环境，最后告诉你它监听了 8080 端口，这个时候，你的浏览器应该打开了一个调试服务器根目录的浏览页面，地址是 <strong><a href="http://localhost:8080/">http://localhost:8080/</a></strong>。</p>
<p>常用 server 命令:</p>
<pre><code><span class="hljs-comment">//启动服务默认端口8080</span>
fisp <span class="hljs-keyword">server</span> start

<span class="hljs-comment">//停止服务</span>
fisp <span class="hljs-keyword">server</span> stop

<span class="hljs-comment">//启动服务设置端口为8081,同时设置php-cgi路径</span>
fisp <span class="hljs-keyword">server</span> start -p <span class="hljs-number">8081</span> --php_exec <span class="hljs-string">"D:/php/php-cgi.exe"</span>

<span class="hljs-comment">//打开本地预览环境</span>
fisp <span class="hljs-keyword">server</span> open

<span class="hljs-comment">//清空本地预览环境,&lt;慎用!&gt;，清空后请安装本地调试环境</span>
fisp <span class="hljs-keyword">server</span> clean
</code></pre><p>更多使用，在命令行执行 fisp server -h 查看</p>
<h3 class="" id="fisp install"><a name="fisp%20install" href="#fisp%20install">fisp install</a></h3><pre><code class="hljs lang-bash">  <span class="hljs-attribute">Usage</span>: <span class="hljs-string">install &lt;command&gt; [options]</span>

<span class="sql">  Commands:

    module                 <span class="hljs-operator"><span class="hljs-keyword">create</span> a <span class="hljs-keyword">module</span>
    widget                 <span class="hljs-keyword">create</span> a widget

  Options:

    -h, <span class="hljs-comment">--help                 output usage information</span>
    -s, <span class="hljs-comment">--scaffold &lt;scaffold&gt;</span>
    -d, <span class="hljs-comment">--dir &lt;name&gt;           create to dir</span>
    <span class="hljs-comment">--with-plugin              if create a module, whether include `plugin`</span>
    <span class="hljs-comment">--repos &lt;url&gt;              repository</span>
    <span class="hljs-comment">--verbose                  output verbose help</span>
    <span class="hljs-comment">--list [query]             list component from the repos</span>
    <span class="hljs-comment">--ld &lt;left_delimiter&gt;      smarty left_delimiter</span>
    <span class="hljs-comment">--rd &lt;right_delimiter&gt;     smarty right_delimiter</span>

  Examples:

    $ fisp <span class="hljs-keyword">install</span> <span class="hljs-keyword">module</span> -d ./<span class="hljs-keyword">to</span>/directory/other
    $ fisp <span class="hljs-keyword">install</span> <span class="hljs-keyword">module</span> -d ./<span class="hljs-keyword">to</span>/directory/common <span class="hljs-comment">--with-plugin</span>
    $ fisp <span class="hljs-keyword">install</span> <span class="hljs-keyword">module</span> -d ./<span class="hljs-keyword">to</span>/directory/other <span class="hljs-comment">--ld '&lt;%' --rd '%&gt;'</span>
    $ fisp <span class="hljs-keyword">install</span> widget -d ./widget/box
    $ fisp <span class="hljs-keyword">install</span> modjs //just download <span class="hljs-string">'modjs'</span></span></span>
</code></pre>
